"use strict";const app={state:{data:[],searchQuery:"",url:"https://raw.githubusercontent.com/Andrew-Dyachenko/test-task-for-candidates/master/data.json",storageName:"gate31"},setState(t){this.state={...this.state,...t},this.render()},async init(t){t&&this.setState({state:t});const e=this.getStorage(this.state.storageName);if(e)this.setState({data:e});else{const t=await this.fetch(this.state.url);t&&(this.setState({data:t}),this.setStroage(this.state.storageName,t))}const s=document.getElementById("search"),a=document.getElementById("submit"),r=document.getElementById("form");if(this.state.data.length){const t=this.getSearchParam("searchQuery");this.setState({searchQuery:t}),s.value=t,s.removeAttribute("disabled"),a.removeAttribute("disabled"),r.addEventListener("submit",this.search.bind(app,s))}else s.addAttribute("disabled"),a.addAttribute("disabled"),r.removeEventListener("submit",this.search);this.render()},getSearchParam:(t="")=>new URLSearchParams(window.location.search).get(t),search:(t,e)=>{e.preventDefault();const s=t.value;app.setState({searchQuery:s});const{protocol:a,host:r,pathname:n}=window.location,i=`${a}//${r}${n}?searchQuery=${s}`;window.history.pushState({path:i},"",i)},getStorage:t=>t&&JSON.parse(sessionStorage.getItem(t)),setStroage:(t,e)=>sessionStorage.setItem(t,JSON.stringify(e)),async fetch(t){let e;return await fetch(t).then((t=>t.json())).then((t=>(e=t,t))).catch(console.error),e},render(){const t=document.getElementById("form__list");if(this.state.data.length){const e=document.getElementById("form__item--template");t.innerHTML="",this.state.data.filter((({title:t})=>{const{searchQuery:e}=this.state;if(this.state.searchQuery){return new RegExp(e,"g").test(t)}return!0})).forEach(((s,a)=>{const r=e.content.cloneNode(!0),n=r.querySelector(".item__title"),i=r.querySelector(".item__text");n.textContent=s.title,i.textContent=s.body;const o=document.createComment(` ${a+1} `);r.prepend(o),t.appendChild(r)}))}else t.innerText="No data founded"}};document.addEventListener("DOMContentLoaded",(()=>{app.init()}));
//# sourceMappingURL=index.1ad5d520.js.map
